---
export interface Props {
  overview: string;
  industry: string[];
  challenge: string;
  approach: string;
  solution: string;
  results: string;
  quote?: {
    text: string;
    attribution: string;
  };
  technologies: string[];
  services: string[];
  keyHighlights: Array<{
    value: string;
    description: string;
  }>;
}

const { 
  overview, 
  industry, 
  challenge, 
  approach, 
  solution, 
  results, 
  quote, 
  technologies, 
  services,
  keyHighlights
} = Astro.props;
---

<section class="bg-[#F9F7F5] py-16 lg:py-24">
  <div class="max-w-28/32 lg:max-w-22/32 2xl:max-w-24/32 3xl:max-w-24/32 mx-auto px-4">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-16 items-start">
      
      <!-- Right Main Content - Moved to top on mobile -->
      <div class="lg:col-span-2 order-1 lg:order-2">
        <div class="flex flex-col gap-16 lg:gap-24">
          
          <!-- Overview Section -->
          <div class="flex flex-col gap-6 lg:gap-8">
            <h3 class="text-2xl sm:text-3xl lg:text-[40px] font-black text-[#16110F] leading-[110%] lg:leading-[46px]">
              Overview
            </h3>
            <div class="text-lg sm:text-xl lg:text-[22px] text-[#16110F] leading-[135%] lg:leading-[29.70px] prose prose-lg max-w-none" set:html={overview}></div>
          </div>

          <!-- Industry Section -->
          <div class="flex flex-col gap-6 lg:gap-8">
            <h3 class="text-2xl sm:text-3xl lg:text-[40px] font-black text-[#16110F] leading-[110%] lg:leading-[46px]">
              Industry
            </h3>
            <div class="text-lg sm:text-xl lg:text-[22px] text-[#16110F] leading-[135%] lg:leading-[29.70px]">
              {industry.map((item, index) => (
                <div>
                  {item}
                  {index < industry.length - 1 && <br />}
                </div>
              ))}
            </div>
          </div>

          <!-- Challenge Section -->
          <div class="flex flex-col gap-6 lg:gap-8">
            <h3 class="text-2xl sm:text-3xl lg:text-[40px] font-black text-[#16110F] leading-[110%] lg:leading-[46px]">
              Challenge
            </h3>
            <div class="text-lg sm:text-xl lg:text-[22px] text-[#16110F] leading-[135%] lg:leading-[29.70px] prose prose-lg max-w-none" set:html={challenge}></div>
          </div>

          <!-- The Approach Section -->
          <div class="flex flex-col gap-6 lg:gap-8">
            <h3 class="text-2xl sm:text-3xl lg:text-[40px] font-black text-[#16110F] leading-[110%] lg:leading-[46px]">
              The Approach
            </h3>
            <div class="text-lg sm:text-xl lg:text-[22px] text-[#16110F] leading-[135%] lg:leading-[29.70px] prose prose-lg max-w-none" set:html={approach}></div>
            
            <!-- CTA Link -->
            <!-- <div class="bg-[#E3EED8] rounded p-3 inline-flex items-center gap-3 self-start">
              <a href="#" class="text-[#16110F] text-lg font-bold underline leading-[24.30px] hover:no-underline transition-all">
                Read how we used Discovery Sprints to solve real problems
              </a>
              <svg class="w-6 h-6 text-[#16110F]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div> -->
          </div>

          <!-- The Solution Section -->
          <div class="flex flex-col gap-6 lg:gap-8">
            <h3 class="text-2xl sm:text-3xl lg:text-[40px] font-black text-[#16110F] leading-[110%] lg:leading-[46px]">
              The Solution
            </h3>
            <div class="text-lg sm:text-xl lg:text-[22px] text-[#16110F] leading-[135%] lg:leading-[29.70px] prose prose-lg max-w-none" set:html={solution}></div>
          </div>

          <!-- Quote Section (if provided) -->
          {quote && (
            <div class="bg-[#B8F0A1] rounded-xl p-6 lg:p-8 flex flex-col gap-6">
              <blockquote class="text-2xl sm:text-3xl lg:text-[48px] text-[#16110F] leading-[110%] lg:leading-[56.64px] font-normal">
                "{quote.text}"
              </blockquote>
              <cite class="text-sm lg:text-[14px] text-[#16110F] leading-[135%] lg:leading-[19.32px] not-italic">
                {quote.attribution}
              </cite>
            </div>
          )}

          <!-- Results Section -->
          <div class="flex flex-col gap-6 lg:gap-8">
            <h3 class="text-2xl sm:text-3xl lg:text-[40px] font-black text-[#16110F] leading-[110%] lg:leading-[46px]">
              Results
            </h3>
            <div class="text-lg sm:text-xl lg:text-[22px] text-[#16110F] leading-[135%] lg:leading-[29.70px] prose prose-lg max-w-none" set:html={results}></div>
          </div>

        </div>
      </div>

      <!-- Left Sidebar - Moved to bottom on mobile -->
      <div class="lg:col-span-1 space-y-12 flex flex-col order-2 lg:order-1">
        <!-- Key Highlights Section -->
        {keyHighlights.length > 0 && (
          <div class="flex flex-col gap-6 order-1">
            <!-- Header with Key Highlights at top, Insights below -->
            <div>
              <h3 class="text-lg sm:text-xl lg:text-[22px] font-bold text-[#100C08] leading-[29.70px] mb-2">
                Key Highlights
              </h3>
              <p class="text-sm uppercase text-[#1E1E1E] font-medium tracking-[4.20px] leading-[18.20px]">
                Insights
              </p>
            </div>
            
            <!-- Desktop: Single green box with stats contained in left column -->
            <div class="hidden lg:block bg-[#B8F0A1] rounded p-6 lg:p-8">
              <div class="flex flex-col gap-8">
                {keyHighlights.map((highlight) => (
                  <div class="flex flex-col">
                    <div class="text-[60px] lg:text-[80px] font-light text-[#16110F] leading-[90%] mb-2">
                      {highlight.value}
                    </div>
                    <div class="text-sm lg:text-base font-bold text-[#16110F] leading-[130%]">
                      {highlight.description}
                    </div>
                  </div>
                ))}
              </div>
            </div>
            
            <!-- Mobile: Stack stats in rows -->
            <div class="flex flex-col sm:grid sm:grid-cols-1 gap-6 lg:hidden">
              {keyHighlights.map((highlight) => (
                <div class="bg-[#B8F0A1] rounded p-6 flex flex-col">
                  <div class="text-[60px] font-light text-[#16110F] leading-[90%] mb-2">
                    {highlight.value}
                  </div>
                  <div class="text-sm font-bold text-[#16110F] leading-[130%]">
                    {highlight.description}
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        <!-- Services/Solutions Section -->
        {services.length > 0 && (
          <div class="flex flex-col gap-6 order-2">
            <p class="text-sm uppercase text-[#1E1E1E] font-medium tracking-[4.20px] leading-[18.20px]">
              Services/Solutions
            </p>
            <div class="flex flex-wrap gap-3">
              {services.map((service) => (
                <span class="px-3 py-2 bg-[#E3EED8] text-[#16110F] text-sm font-bold uppercase rounded tracking-wide">
                  {service}
                </span>
              ))}
            </div>
          </div>
        )}

        <!-- Technology Section -->
        {technologies.length > 0 && (
          <div class="flex flex-col gap-6 order-3">
            <p class="text-sm uppercase text-[#1E1E1E] font-medium tracking-[4.20px] leading-[18.20px]">
              Technology
            </p>
            <div class="text-lg text-[#100C08] leading-[24.30px]">
              {technologies.map((tech, index) => (
                <div>
                  {tech}
                  {index < technologies.length - 1 && <br />}
                </div>
              ))}
            </div>
          </div>
        )}
      </div>
    </div>
  </div>
</section>
